{{dropzone-widget
    url=url
    options=dropzoneOptions
    sending=(action 'sending')
    buildUrl=(action 'getUrl')
    complete=(action 'complete')
    preUpload=(action 'preUpload')
    defaultMessage='Drop preprint file here to upload'
    maxfilesexceeded=(action 'maxfilesexceeded')
}}

{{#liquid-if (and selectedNode (or hasFile selectedFile)) use='crossFade'}}
    <div class="m-t-lg">
        {{convert-or-copy-project convertOrCopy=convertOrCopy nodeTitle=nodeTitle node=node titleValid=titleValid convertProjectConfirmed=convertProjectConfirmed}}
    </div>
{{/liquid-if}}

{{#liquid-if (and hasFile (or (eq uploadIntent 'newNodeNewFile') convertOrCopy)) use='crossFade'}}
    {{#if (not-eq uploadIntent 'newNodeNewFile')}}
        {{#if (eq convertOrCopy 'convert')}}
            {{#if convertProjectConfirmed}}
                <label> 4. Edit preprint title </label>
                {{preprint-title-editor nodeTitle=nodeTitle titleValid=titleValid}}
            {{/if}}
        {{else}}
            <label> 4. Add preprint title</label>
            {{preprint-title-editor nodeTitle=nodeTitle titleValid=titleValid}}
        {{/if}}
    {{else}}
        {{preprint-title-editor nodeTitle=nodeTitle titleValid=titleValid}}
    {{/if}}
{{/liquid-if}}

<div class="p-t-xs pull-right">
    <button class="btn btn-default" {{action changeState startState}}>Back</button>
    <button class="btn btn-primary" disabled={{not (and hasFile titleValid)}} {{action 'setNodeAndFile'}}>Next</button>
</div>